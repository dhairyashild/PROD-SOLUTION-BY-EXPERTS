# ===== NODE.JS =====

############ SLOW DOCKERFILE ############################
COPY . /app              # Copies EVERYTHING (source + dependencies files)
RUN npm install          # ALWAYS runs - cache busted by previous COPY
RUN npm run build        # ALWAYS runs - cache busted by npm install

############ FAST DOCKERFILE ############################
FROM node:18
WORKDIR /app

# Copy package files FIRST (rarely change)
COPY package*.json ./
RUN npm install

# Copy source code LAST (changes frequently)
COPY . .
RUN npm run build












--------------------------------------------------------------------------
# ===== JAVA/MAVEN =====
FROM maven:3.8-openjdk-17
WORKDIR /app

# Copy pom FIRST (rarely changes)
COPY pom.xml ./
RUN mvn dependency:go-offline -B

# Copy source LAST (changes frequently)
COPY src ./src
RUN mvn package -DskipTests





# ===== PYTHON =====
FROM python:3.9
WORKDIR /app

# Copy requirements FIRST (rarely changes)
COPY requirements.txt ./
RUN pip install -r requirements.txt

# Copy source LAST (changes frequently)
COPY . .






# ===== SYSTEM DEPS + LANGUAGE =====
FROM ubuntu:20.04

# System dependencies (rarely change)
RUN apt-get update && apt-get install -y curl python3 python3-pip

WORKDIR /app

# Python dependencies (rarely change)
COPY requirements.txt ./
RUN pip3 install -r requirements.txt

# Source code LAST (changes frequently)
COPY . .
